CREATE TABLE IF NOT EXISTS chat
(
    ID         BIGINT      primary key
--    Created_at TIMESTAMP WITH TIME ZONE NOT NULL
);


CREATE TABLE IF NOT EXISTS link
(
    ID         BIGINT      primary key GENERATED BY DEFAULT AS IDENTITY,
    URL       varchar(255) NOT NULL,
    Last_updated TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    Checked_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    Created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS chat_link
(
    Chat_id BIGINT references chat(id) ON DELETE CASCADE,
    Link_id BIGINT references link(id) ON DELETE CASCADE,
    PRIMARY KEY(Chat_id, Link_id)
);

CREATE TABLE IF NOT EXISTS questions(
    ID BIGSERIAL PRIMARY KEY,
    Answer_count INT,
    Link_id BIGINT,
    FOREIGN KEY (Link_id) REFERENCES link(ID) ON DELETE CASCADE
);
